{% extends "registro/base.html" %}
{% block titulo %}Lista{% endblock %}
{% block cuerpo %}
<script type = "text/javascript" language = "javascript">
$(document).ready(function(){
  $.ajax({
    type: "GET",
    dataType: "json",
    url: "http://127.0.0.1:8000/datos",
  })
  .done(function(data, textStatus,jqXHR) {
    if (console && console.log) {
      //alert( "La solicitud se ha completado correctamente." );
      data2 = {
        "obj": {
          "nombre": "argenisssssss",
          "cedula": "1111111122222"
        }
      }
      console.log(data2);
      /*
      console.log(data["nombre"]);
      for (var x in data){
        console.log(x);
      }
      */
      //$('#content').html(data);
      /*
      $("#load").click(function(event){
        $('#content').html('<p> Name: ' + data);
      });
      */
    }
  })
  .fail(function(jqXHR,textStatus,errorThrown) {
    if ( console && console.log ) {
      alert( "La solicitud a fallado: " + textStatus);
    }
  });
});
</script>
<div id="content">Aquí va lo que se cargara con ajax...</div>
<input type="button" id="load" value="Cargar data" />
<h1>Lista de personas</h1>
<br />
<a href="{% url 'registro:registrar' %}">
  <button class="btn btn-success">NUEVA</button>
</a>
<br />
<br />
<table border="1px" id="example" class="display" cellspacing="0px" style="width:100%;">
  <thead>
    <tr>
      <th class="text-center">ID</th>
      <th class="text-center">Nombre</th>
      <th class="text-center">Cédula</th>
      <th class="text-center">Acciones</th>
    </tr>
  </thead>
  <tbody>
  {% for persona in object_list %}
  <tr>
    <td class="text-center">{{ persona.id }}</td>
    <td class="text-center">{{ persona.nombre }}</td>
    <td class="text-center">{{ persona.cedula }}</td>
    <td class="text-center">
      <a href="{% url 'registro:editar' persona.id %}">
        <button class="btn btn-info">EDITAR</button>
      </a>
      <a href="{% url 'registro:borrar' persona.id %}">
        <button class="btn btn-danger">BORRAR</button>
      </a>
    </td>
  </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}